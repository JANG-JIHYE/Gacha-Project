<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>„Ç¨„ÉÅ„É£„Ç≥</title>
    <!-- ======================= [cssÏó∞Í≤∞] ======================= -->
    <link rel="stylesheet" href="../static/css/gacha_board.css">    
    <script src="../static/js/rest.js" defer></script>      <!--js Ïó∞Í≤∞ÏúÑÏπò ÏòÆÍπÄ(ÏàòÏ†ï) -->
</head>
<body>
    <header class="header">
        <div class="top-bar">
            <a class="logo" href="/" onclick="localStorage.removeItem('goToMypage')">
    <span class="logo-text">„Ç¨„ÉÅ„É£„Ç≥</span>
    <div class="gacha-machine">
        <div class="machine-top"></div>
        <div class="machine-body">
            <div class="machine-window">
                <div class="machine-ball"></div>
            </div>
        </div>
        <div class="machine-controls">
            <div class="control-button"></div>
            <div class="control-knob"></div>
        </div>
    </div>
</a>

            <div class="auth-buttons">
                <a class="btn btn-login" href="#" onclick="openLoginModal()">„É≠„Ç∞„Ç§„É≥</a>
                <a class="btn btn-signup" href="#" onclick="openSignupModal()">Êñ∞Ë¶èÁôªÈå≤</a>
            </div>
        </div>
        <nav class="nav-menu">
            <ul class="nav-list">
                <li class="nav-item"><a href="/gachainfopage">„Ç¨„ÉÅ„É£„É™„Çπ„Éà</a></li>
                <li class="nav-item"><a href="/map">„Ç¨„ÉÅ„É£„Éû„ÉÉ„Éó</a></li>
                <li class="nav-item"><a href="/gacha_board">Êé≤Á§∫Êùø</a></li>
                <li class="nav-item"><a href="/" onclick="localStorage.setItem('goToMypage', 'true')">„Éû„Ç§„Éö„Éº„Ç∏</a></li>
                <li class="nav-item"><a href="/settings" onclick="localStorage.setItem('goToSettings','true')">Ë®≠ÂÆö</a></li>

            </ul>
        </nav>
    </header>
<!------------------------------------------------ Í≤åÏãúÌåê html ÏãúÏûë ---------------------------------------------------->
    <!-- ======================= [Î©îÏù∏ ÏΩòÌÖêÏ∏† ÏòÅÏó≠] ======================= -->
    <main class="main-content">

        <!-- ================= [Í≤åÏãúÌåê Ï†ÑÏ≤¥ Ïª®ÌÖåÏù¥ÎÑà] ================= -->
        <div class="board-container">
            
            <!-- Í≤åÏãúÌåê Ìó§Îçî Î∞è ÏÉà Í∏Ä ÏûëÏÑ± Î≤ÑÌäº -->
            <div class="board-header">
                <h1 class="board-title">„Ç¨„ÉÅ„É£„Ç≥Êé≤Á§∫Êùø</h1>
                <button class="btn btn-write" onclick="showWriteForm()">Êñ∞„Åó„ÅÑÊäïÁ®ø„Çí‰ΩúÊàê„Åô„Çã</button>
            </div>

            <!-- ========== [Í∏Ä ÏûëÏÑ± Ìèº] ========== -->
            <div class="write-form" id="writeForm" style="display: none;">
                <h2 class="form-title">Êñ∞„Åó„ÅÑË®ò‰∫ã‰ΩúÊàê</h2>
                <!-- Ïπ¥ÌÖåÍ≥†Î¶¨ ÏÑ†ÌÉù -->
                <div class="form-group">
                    <select class="form-input" id="postTag">
                        <option value="">„Ç´„ÉÜ„Ç¥„É™„Éº</option>
                        <option value="„É¨„Éì„É•„Éº">„É¨„Éì„É•„Éº</option>
                        <option value="Ë≥™Âïè">Ë≥™Âïè</option>
                        <option value="ÂØÑ‰ªò">ÂØÑ‰ªò</option>
                        <option value="Ëá™Áî±">Ëá™Áî±</option>
                    </select>
                </div>
                <!-- Ï†úÎ™© ÏûÖÎ†• -->
                <div class="form-group">
                    <input class="form-input" id="postTitle" placeholder="„Çø„Ç§„Éà„É´„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ" type="text"/>
                </div>
                <!-- Î≥∏Î¨∏ ÏûÖÎ†• -->
                <div class="form-group">
                    <textarea class="form-textarea" id="postContent" placeholder="ÂÜÖÂÆπ„ÇíÂÖ•Âäõ„ÅÑ„Å¶„Åè„Å†„Åï„ÅÑ"></textarea>
                </div>
                <!-- ÎØ∏ÎîîÏñ¥ ÏóÖÎ°úÎìú -->
                <div class="form-group">
                    <label class="media-upload-label" for="mediaUpload">
                        <span class="upload-icon">üì∑</span> ÂÜôÁúü„ÉªÂãïÁîª„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ
                    </label>
                    <input class="media-upload-input" id="mediaUpload" type="file" accept="image/*,video/*" multiple/>
                    <div class="media-preview" id="mediaPreview"></div>
                </div>
                <!-- ÏûëÏÑ± ÏôÑÎ£å / Ï∑®ÏÜå Î≤ÑÌäº -->
                <div class="form-buttons">
                    <button class="btn btn-submit" onclick="submitPost()">Ë®òÂÖ•ÂÆå‰∫Ü</button>
                    <button class="btn btn-cancel" onclick="hideWriteForm()">„Ç≠„É£„É≥„Çª„É´</button>
                </div>
            </div>

            <!-- ========== [Í∏Ä ÏàòÏ†ï Ìèº] ========== -->
            <div class="edit-form" id="editForm" style="display: none;">
                <h2 class="form-title">Ë®ò‰∫ã‰øÆÊ≠£</h2>
                <!-- Ïπ¥ÌÖåÍ≥†Î¶¨ ÏÑ†ÌÉù -->
                <div class="form-group">
                    <select class="form-input" id="editTag">
                        <option value="">„Ç´„ÉÜ„Ç¥„É™„Éº</option>
                        <option value="„É¨„Éì„É•„Éº">„É¨„Éì„É•„Éº</option>
                        <option value="Ë≥™Âïè">Ë≥™Âïè</option>
                        <option value="ÂØÑ‰ªò">ÂØÑ‰ªò</option>
                        <option value="Ëá™Áî±">Ëá™Áî±</option>
                    </select>
                </div>
                <!-- Ï†úÎ™© ÏûÖÎ†• -->
                <div class="form-group">
                    <input class="form-input" id="editTitle" placeholder="„Çø„Ç§„Éà„É´„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ" type="text"/>
                </div>
                <!-- Î≥∏Î¨∏ ÏûÖÎ†• -->
                <div class="form-group">
                    <textarea class="form-textarea" id="editContent" placeholder="ÂÜÖÂÆπ„ÇíÂÖ•Âäõ„ÅÑ„Å¶„Åè„Å†„Åï„ÅÑ"></textarea>
                </div>
                <!-- ÎØ∏ÎîîÏñ¥ ÏóÖÎ°úÎìú -->
                <div class="form-group">
                    <label class="media-upload-label" for="editMediaUpload">
                        <span class="upload-icon">üì∑</span> ÂÜôÁúü„ÉªÂãïÁîª„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ
                    </label>
                    <input class="media-upload-input" id="editMediaUpload" type="file" accept="image/*,video/*" multiple/>
                    <div class="media-preview" id="editMediaPreview"></div>
                </div>
                <!-- ÏàòÏ†ï ÏôÑÎ£å / Ï∑®ÏÜå Î≤ÑÌäº -->
                <div class="form-buttons">
                    <button class="btn btn-submit" onclick="updatePost()">‰øÆÊ≠£ÂÆå‰∫Ü</button>
                    <button class="btn btn-cancel" onclick="hideEditForm()">„Ç≠„É£„É≥„Çª„É´</button>
                </div>
            </div>

            <!-- ========== [Í≤åÏãúÍ∏Ä Î™©Î°ù](ÏàòÏ†ï) ========== -->
            <div class="post-list" id="postList"></div>

            <!-- ========== [Í≤åÏãúÍ∏Ä ÏÉÅÏÑ∏ Î≥¥Í∏∞] ========== -->
            <div class="post-detail" id="postDetail" style="display: none;">
                <!-- Îí§Î°úÍ∞ÄÍ∏∞ Î≤ÑÌäº -->
                <div class="post-detail-header">
                    <button class="btn-back" onclick="closePost()">‚Üê Êàª„Çã</button>
                </div>

                <!-- ÏÉÅÏÑ∏ Ï†ïÎ≥¥ -->
                <div class="post-detail-content">
                    <h1 class="post-detail-title" id="postDetailTitle"></h1>
                    <div class="post-detail-meta">
                        <span class="post-detail-author" id="postDetailAuthor"></span>
                        <span class="post-detail-date" id="postDetailDate"></span>
                    </div>
                    <div class="post-detail-media" id="postDetailMedia"></div>
                    <div class="post-detail-text" id="postDetailText"></div>

                    <!-- Ï¢ãÏïÑÏöî Í∏∞Îä• -->
                    <div class="like-section" style="margin-top: 15px;"> 
                        <button class="like-button" onclick="toggleLike(this, this.dataset.postId)" data-post-id="123">
                            <span class="heart-icon">‚ù§Ô∏è</span>  
                            <span class="like-count">0</span>    
                        </button>
                    </div>

                    <!-- ÏàòÏ†ï / ÏÇ≠Ï†ú Î≤ÑÌäº -->
                    <div class="post-actions">
                        <button class="btn-edit" onclick="editPost(currentPostId)">‰øÆÊ≠£</button>
                        <button class="btn-delete" onclick="deletePost(currentPostId)">ÂâäÈô§</button>
                    </div>

                    <!-- ÎåìÍ∏Ä ÏòÅÏó≠ -->
                    <div class="comments-section">
                        <h3 class="comments-title">„Ç≥„É°„É≥„Éà</h3>
                        <!-- ÎåìÍ∏Ä ÏûëÏÑ± -->
                        <div class="comment-form" id="commentForm">
                            <textarea class="comment-textarea" id="commentContent" placeholder="„Ç≥„É°„É≥„Éà„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ"></textarea>
                            <button class="comment-submit" onclick="submitComment()">„Ç≥„É°„É≥„ÉàÊäïÁ®ø</button>
                        </div>
                        <!-- ÎåìÍ∏Ä Î™©Î°ù -->
                        <div class="comments-list" id="commentsList"></div>
                    </div>
                </div>
            </div>

            <!-- ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖò(ÏàòÏ†ï) -->
            <div class="pagination"></div>
    <!-- ======================= [Î°úÍ∑∏Ïù∏ Î™®Îã¨](ÎπÑÎ≤à Ïû¨ÏÑ§Ï†ïÍπåÏßÄ ÏàòÏ†ï) ======================= -->
    <div class="modal-overlay" id="loginModal">
        <div class="modal">
            <button class="modal-close" onclick="closeLoginModal()">√ó</button>
            <h2 class="modal-title">„É≠„Ç∞„Ç§„É≥</h2>
            <!-- ‚úÖ onsubmit Ïù¥Î≤§Ìä∏ Ï∂îÍ∞Ä -->
            <form id="loginForm" onsubmit="handleLogin(event)"> 
                <div class="form-group">
                    <label for="username">„É¶„Éº„Ç∂„ÉºID</label>
                    <input id="username" type="text" placeholder="„É¶„Éº„Ç∂„ÉºID„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ" required class="form-input"/>
                </div>
                <div class="form-group">
                    <label for="password">„Éë„Çπ„ÉØ„Éº„Éâ</label>
                    <input id="password" type="password" placeholder="„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ" required class="form-input"/>
                </div>
                <button type="submit" class="form-btn">„É≠„Ç∞„Ç§„É≥</button>
                <div class="form-links"> <!-- ÏàòÏ†ï -->
                    <a href="#" class="form-link" onclick="openFindIdModal(); return false;">„É¶„Éº„Ç∂„ÉºIDÊ§úÁ¥¢</a>
                    <a href="#" class="form-link" onclick="openResetPwModal(); return false;">„Éë„Çπ„ÉØ„Éº„ÉâÂÜçË®≠ÂÆö</a>
                </div>
                <div class="switch-link">
                    <span>„Ç¢„Ç´„Ç¶„É≥„Éà„Çí„ÅäÊåÅ„Å°„Åß„Å™„ÅÑÊñπ„ÅØ</span>
                    <button type="button" class="switch-btn" onclick="switchToSignup()">Êñ∞Ë¶èÁôªÈå≤</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ======================= [ÌöåÏõêÍ∞ÄÏûÖ Î™®Îã¨] ======================= -->
    <div class="modal-overlay" id="signupModal">
        <div class="modal">
            <button class="modal-close" onclick="closeSignupModal()">√ó</button>
            <h2 class="modal-title">Êñ∞Ë¶èÁôªÈå≤</h2>
            <!-- ‚úÖ onsubmit Ïù¥Î≤§Ìä∏ Ï∂îÍ∞Ä -->
            <form id="signupForm" onsubmit="handleSignup(event)">
                <div class="form-group">
                    <label for="signup-id">„É¶„Éº„Ç∂„ÉºID</label>
                    <div style="display: flex; gap: 10px;">
                        <input id="signup-id" type="text" placeholder="„É¶„Éº„Ç∂„ÉºID„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ" required minlength="4" maxlength="20" pattern="(?=.*[A-Za-z])[A-Za-z0-9]+" class="form-input"/>
                        <button type="button" class="btn-small" onclick="checkDuplicate('id')">Á¢∫Ë™ç</button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="signup-nickname">„Éã„ÉÉ„ÇØ„Éç„Éº„É†</label>
                    <div style="display: flex; gap: 10px;">
                        <input id="signup-nickname" type="text" placeholder="„Éã„ÉÉ„ÇØ„Éç„Éº„É†„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ" required minlength="2" maxlength="15" class="form-input"/>
                        <button type="button" class="btn-small" onclick="checkDuplicate('nickname')">Á¢∫Ë™ç</button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="signup-password">„Éë„Çπ„ÉØ„Éº„Éâ</label>
                    <input id="signup-password" type="password" placeholder="„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ" required minlength="8" pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]+$" class="form-input"/>
                </div>
                <div class="form-group">
                    <label for="signup-password-confirm">„Éë„Çπ„ÉØ„Éº„ÉâÁ¢∫Ë™ç</label>
                    <input id="signup-password-confirm" type="password" placeholder="„ÇÇ„ÅÜ‰∏ÄÂ∫¶„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ" required class="form-input"/>
                </div>
                <div class="form-group">
                    <label for="signup-email">„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ</label>
                    <input id="signup-email" type="email" placeholder="„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ" required class="form-input"/>
                </div>
                <button type="submit" class="form-btn">Êñ∞Ë¶èÁôªÈå≤</button>
                <div class="switch-link">
                    <span>„Åô„Åß„Å´„Ç¢„Ç´„Ç¶„É≥„Éà„Çí„ÅäÊåÅ„Å°„ÅÆÊñπ„ÅØ</span>
                    <button type="button" class="switch-btn" onclick="switchToLogin()">„É≠„Ç∞„Ç§„É≥</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ÏïÑÏù¥ÎîîÏ∞æÍ∏∞ Î™®Îã¨ -->
    <div class="modal-overlay" id="findIdModal">
        <div class="modal">
            <button class="modal-close" onclick="closeFindIdModal()">&times;</button>
            <h2 class="modal-title">„É¶„Éº„Ç∂„ÉºIDÊ§úÁ¥¢</h2>
            <form onsubmit="handleFindId(event)">
                <div class="form-group">
                    <label for="find-id-email">„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ</label>
                    <input type="email" id="find-id-email" class="form-input" placeholder="‰ºöÂì°ÁôªÈå≤ÊôÇ„ÅÆ„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ" required>
                </div>
                <button type="submit" class="form-btn">Á¢∫Ë™ç</button>
                <div id="find-id-result" style="margin-top:15px; color:#e91e63; text-align:center; font-weight:600;"></div>
            </form>
        </div>
    </div>

    <!--ÎπÑÎ∞ÄÎ≤àÌò∏ Ïû¨ÏÑ§Ï†ï Î™®Îã¨ -->
<!-- ÎπÑÎ∞ÄÎ≤àÌò∏ Ïû¨ÏÑ§Ï†ï Î™®Îã¨ -->
    <div class="modal-overlay" id="resetPwModal">
        <div class="modal">
            <button class="modal-close" onclick="closeResetPwModal()">&times;</button>
            <h2 class="modal-title">„Éë„Çπ„ÉØ„Éº„ÉâÂÜçË®≠ÂÆö</h2>
            <form id="resetPwForm" onsubmit="handleResetPw(event)">
                <div class="form-group">
                    <label class="form-label" for="reset-id">„É¶„Éº„Ç∂„ÉºID</label>
                    <input type="text" id="reset-id" class="form-input" placeholder="„É¶„Éº„Ç∂„ÉºID„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="reset-email">„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ</label>
                    <input type="email" id="reset-email" class="form-input" placeholder="„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ" required>
                </div>
                <button type="submit" class="form-btn">Á¢∫Ë™ç</button>
                <div id="reset-pw-result" style="margin-top:15px; color:#e91e63; text-align:center; font-weight:600;">
                </div>
            </form>
            <div id="reset-extra-fields" style="display:none;">
                <div class="form-group">
                    <label class="form-label" for="reset-code">Ë™çË®º„Ç≥„Éº„Éâ</label>
                    <input type="text" id="reset-code" class="form-input" placeholder="„É°„Éº„É´„ÅßÂ±ä„ÅÑ„ÅüË™çË®º„Ç≥„Éº„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="new-pw">Êñ∞„Åó„ÅÑ„Éë„Çπ„ÉØ„Éº„Éâ</label>
                    <input type="password" id="new-pw" class="form-input" placeholder="Êñ∞„Åó„ÅÑ„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ" required>
                </div>
                <button type="button" class="form-btn" onclick="handleResetConfirm()">„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂ§âÊõ¥„Åô„Çã</button>
            </div>
        </div>
    </div>


</body>
</html>
    <!-- ======================= [JS Ïó∞Í≤∞] ======================= -->
    <script src="/static/js/gacha_board.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const loginForm = document.getElementById("loginForm");
            if (loginForm) {
                loginForm.addEventListener("submit", handleLogin);
            }
        });
    </script>
</body>
</html>